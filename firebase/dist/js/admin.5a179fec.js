"use strict";(self["webpackChunkvue_gallery"]=self["webpackChunkvue_gallery"]||[]).push([[328],{5673:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var o=function(){var t=this,e=t._self._c;return e("DefaultLayout",[t.isLoading?e("div",{staticClass:"spinnerCtn"},[e("Spinner")],1):e("div",[e("section",{staticClass:"container postSec"},[e("div",{staticClass:"searchCtn mx-auto"},[e("div",{staticClass:"manageBtn"},[e("router-link",{attrs:{to:{name:"adminAdd"}}},[e("font-awesome-icon",{staticClass:"AddIcon",attrs:{icon:["fas","circle-plus"]}}),e("span",{staticClass:"d-none d-md-inline"},[t._v(" Add New Post")])],1)],1),e("form",{staticClass:"searchBar"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchKey,expression:"searchKey"}],staticClass:"form-control me-2",attrs:{name:"searchKeyInput",type:"search",placeholder:"Type something to search...","aria-label":"Search"},domProps:{value:t.searchKey},on:{input:function(e){e.target.composing||(t.searchKey=e.target.value)}}}),e("button",{staticClass:"searchBtn btn btn-outline-success",attrs:{type:"submit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toChangeSearchKey(t.searchKey.trim())}}},[t._v("Search")])])]),t.postsFilterBySearchKey&&t.postsFilterBySearchKey.length?e("div",[e("main",{staticClass:"tableCtn mx-auto"},[e("table",{staticClass:"table table-striped table-hover"},[e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),e("th",{attrs:{scope:"col"}},[t._v("Post Title")]),e("th",{attrs:{scope:"col"}},[t._v("Date "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.postsInDesc,expression:"postsInDesc"}],on:{click:t.oderPosts}},[e("font-awesome-icon",{attrs:{icon:["fas","caret-down"]}})],1),e("span",{directives:[{name:"show",rawName:"v-show",value:!t.postsInDesc,expression:"!postsInDesc"}],on:{click:t.oderPosts}},[e("font-awesome-icon",{attrs:{icon:["fas","caret-down"],rotation:"180"}})],1)]),e("th",{attrs:{scope:"col"}},[t._v("Content")]),e("th",{attrs:{scope:"col"}},[t._v("Action")])])]),e("tbody",t._l(t.orderedPosts,(function(s,o){return e("tr",{key:o,on:{click:function(e){return t.openThisPostPage(s.id)}}},[e("th",{attrs:{scope:"row"}},[t._v(t._s(o+1))]),e("td",[t._v(t._s(t.filteredTitle(s.title)))]),e("td",[t._v(t._s(t._f("toDate")(s.date)))]),e("td",[t._v(t._s(t.filteredContent(s.content)))]),e("td",{staticClass:"iconCtn"},[e("button",{staticClass:"editBtb btn btn-light",on:{click:function(e){return e.stopPropagation(),t.toAdminEditPage(s.id)}}},[e("font-awesome-icon",{attrs:{icon:["fas","pen"]}})],1),e("button",{staticClass:"deleteBtn btn btn-light",attrs:{"data-bs-toggle":"modal","data-bs-target":"#exampleModal"},on:{click:function(e){return e.stopPropagation(),t.pressDeleteBtn(s)}}},[e("font-awesome-icon",{attrs:{icon:["fas","xmark"]}})],1)])])})),0)]),t.posts.length?t._e():e("div",{staticClass:"noPostMsg"},[t._v("No post yet. Please click the button above to add a new post! ")])]),e("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},on:{click:t.cancelDelete}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("font-awesome-icon",{attrs:{icon:["fas","circle-exclamation"]}}),t._v(" Confirm Delete ")],1),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:function(e){return e.stopPropagation(),t.cancelDelete.apply(null,arguments)}}})]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"modalQuestion"},[t._v("Are you sure you want to delete this post?")]),e("div",{staticClass:"modalPostTitle"},[t._v("【 Post Title 】 "),e("span",{on:{click:function(e){return e.stopPropagation(),t.openThisPostPage(t.postIDToDelete)}}},[t._v(t._s(t.postTitleToDelete))])]),e("div",{staticClass:"modalPostCoverCtn"},[t.postCoverToDelete?e("img",{staticClass:"modalPostCoverCtn_img",attrs:{src:t._f("emptyImage")(t.postCoverToDelete),alt:"cover-image"}}):t._e()])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary cancelDeleteBtn",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){return e.stopPropagation(),t.cancelDelete.apply(null,arguments)}}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-primary confirmDeleteBtn",attrs:{type:"button","data-bs-dismiss":"modal"},on:{click:function(e){return e.stopPropagation(),t.confirmDelete.apply(null,arguments)}}},[t._v("Delete")])])])])])]):e("div",{staticClass:"noMatchCtn mx-auto text-center"},[e("p",[t._v("Sorry, no posts found. Please try different keywords or clear the search field.")])])])])])},a=[],n=(s(7658),s(3019)),i=s(408),l=s(4145),r={name:"PostView",mixins:[l.L,l.E],components:{DefaultLayout:n.HQ,Spinner:n.$j},data(){return{searchKey:"",postIDToDelete:null,postTitleToDelete:null,postCoverToDelete:null,postsInDesc:!0}},beforeRouteLeave(t,e,s){this.toChangeSearchKey(""),s()},computed:{isLoading(){return this.isLoadingPost||!this.posts},...(0,i.rn)(["isLoadingPost","posts"]),...(0,i.Se)(["postsFilterBySearchKey","sortedPostsAsc"]),orderedPosts(){return this.postsInDesc?this.postsFilterBySearchKey:this.sortedPostsAsc}},watch:{searchKey(){this.searchKey.trim()||this.toChangeSearchKey("")}},methods:{...(0,i.nv)(["toDeletePost","toChangeSearchKey"]),oderPosts(){this.postsInDesc=!this.postsInDesc},filteredTitle(t){return t.length>=20?t.slice(0,20)+"...":t},filteredContent(t){let e=t.replace(/<br>/g," ");return e.length>=30?e.slice(0,30)+"...":e},openThisPostPage(t){console.log("open: ",t),window.open("/post/"+t,"_blank")},toAdminEditPage(t){this.$router.push({name:"adminEdit",params:{id:t}})},pressDeleteBtn(t){this.postIDToDelete=t.id,this.postTitleToDelete=t.title,this.postCoverToDelete=null;const e=new Image;e.onload=()=>{this.postCoverToDelete=e.src},e.src=t.cover},cancelDelete(){this.postIDToDelete=null,this.postTitleToDelete=null,this.postCoverToDelete=null},confirmDelete(){console.log("Delete post with ID: ",this.postIDToDelete),this.toDeletePost(this.postIDToDelete)}}},c=r,d=s(1001),p=(0,d.Z)(c,o,a,!1,null,"6da80c97",null),h=p.exports}}]);
//# sourceMappingURL=admin.5a179fec.js.map