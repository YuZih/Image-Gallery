{"version":3,"file":"js/adminAdd.21f18bd2.js","mappings":"kKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,gBAAgB,CAACA,EAAG,OAAO,CAACE,YAAY,0BAA0B,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,KAAO,QAAQC,GAAG,CAAC,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBT,EAAIU,aAAaC,MAAM,KAAMC,UAAU,IAAI,CAACV,EAAG,KAAK,CAACE,YAAY,yBAAyB,CAACJ,EAAIa,GAAG,kBAAkBX,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,QAAQ,CAACE,YAAY,0BAA0BC,MAAM,CAAC,IAAM,eAAe,CAACL,EAAIa,GAAG,SAASX,EAAG,OAAO,CAACF,EAAIa,GAAG,SAASX,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,QAAQ,CAACY,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOjB,EAAIkB,SAASC,MAAOC,WAAW,mBAAmBhB,YAAY,eAAeC,MAAM,CAAC,KAAO,OAAO,GAAK,aAAa,KAAO,QAAQ,YAAc,yBAAyBgB,SAAS,CAAC,MAASrB,EAAIkB,SAASC,OAAQb,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOe,OAAOC,WAAiBvB,EAAIwB,KAAKxB,EAAIkB,SAAU,QAASX,EAAOe,OAAOL,MAAM,KAAKf,EAAG,MAAM,CAACY,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIyB,eAAiBzB,EAAIkB,SAASC,MAAMO,OAAQN,WAAW,2CAA2ChB,YAAY,YAAY,CAACJ,EAAIa,GAAG,4BAA4BX,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,QAAQ,CAACE,YAAY,0BAA0BC,MAAM,CAAC,IAAM,gBAAgB,CAACL,EAAIa,GAAG,WAAWX,EAAG,OAAO,CAACF,EAAIa,GAAG,SAASX,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,WAAW,CAACY,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOjB,EAAIkB,SAASS,QAASP,WAAW,qBAAqBhB,YAAY,eAAeC,MAAM,CAAC,GAAK,cAAc,KAAO,UAAU,KAAO,KAAK,YAAc,qCAAqCgB,SAAS,CAAC,MAASrB,EAAIkB,SAASS,SAAUrB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOe,OAAOC,WAAiBvB,EAAIwB,KAAKxB,EAAIkB,SAAU,UAAWX,EAAOe,OAAOL,MAAM,KAAKf,EAAG,MAAM,CAACY,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIyB,eAAiBzB,EAAIkB,SAASS,QAAQD,OAAQN,WAAW,6CAA6ChB,YAAY,YAAY,CAACJ,EAAIa,GAAG,8BAA8BX,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,QAAQ,CAACE,YAAY,0BAA0BC,MAAM,CAAC,IAAM,eAAe,CAACL,EAAIa,GAAG,eAAeX,EAAG,OAAO,CAACF,EAAIa,GAAG,SAASX,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,QAAQ,CAAC0B,IAAI,YAAYxB,YAAY,SAASC,MAAM,CAAC,KAAO,OAAO,OAAS,UAAU,GAAK,aAAa,KAAO,SAASC,GAAG,CAAC,OAASN,EAAI6B,kBAAkB3B,EAAG,SAAS,CAACE,YAAY,yBAAyBC,MAAM,CAAC,KAAO,UAAUC,GAAG,CAAC,MAAQN,EAAI8B,mBAAmB,CAAC9B,EAAIa,GAAGb,EAAI+B,GAAG/B,EAAIgC,SAAW,gBAAkB,kBAAkB9B,EAAG,MAAM,CAACY,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOjB,EAAIyB,eAAiBzB,EAAIgC,SAAUZ,WAAW,8BAA8BhB,YAAY,YAAY,CAACJ,EAAIa,GAAG,gCAAgCX,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,QAAQ,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,OAAO,SAAW,GAAG,GAAK,gBAAgB,YAAc,kBAAkBgB,SAAS,CAAC,MAAQrB,EAAIgC,cAAehC,EAAIiC,gBAAiB/B,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAeC,MAAM,CAAC,IAAML,EAAIiC,gBAAgB,IAAM,uBAAuBjC,EAAIkC,OAAOhC,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,QAAQ,CAACE,YAAY,0BAA0BC,MAAM,CAAC,IAAM,kBAAkB,CAACL,EAAIa,GAAG,yBAAyBX,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,mBAAmBC,MAAM,CAAC,GAAK,kBAAkB,CAACL,EAAIa,GAAG,cAAcX,EAAG,QAAQ,CAACY,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOjB,EAAImC,SAAUf,WAAW,aAAahB,YAAY,eAAeC,MAAM,CAAC,GAAK,gBAAgB,KAAO,OAAO,YAAc,sBAAsB,aAAa,gBAAgB,mBAAmB,iBAAiBgB,SAAS,CAAC,MAASrB,EAAImC,UAAW7B,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOe,OAAOC,YAAiBvB,EAAImC,SAAS5B,EAAOe,OAAOL,MAAK,SAASf,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,mBAAmBC,MAAM,CAAC,GAAK,mBAAmB,CAACL,EAAIa,GAAG,eAAeX,EAAG,QAAQ,CAACY,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOjB,EAAIoC,SAAUhB,WAAW,aAAahB,YAAY,eAAeC,MAAM,CAAC,GAAK,iBAAiB,KAAO,OAAO,YAAc,uBAAuB,aAAa,iBAAiB,mBAAmB,kBAAkBgB,SAAS,CAAC,MAASrB,EAAIoC,UAAW9B,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOe,OAAOC,YAAiBvB,EAAIoC,SAAS7B,EAAOe,OAAOL,MAAK,SAASf,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACJ,EAAIa,GAAG,gFAAiFb,EAAIkB,SAASmB,SAASC,KAAOtC,EAAIkB,SAASmB,SAASE,IAAKrC,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,OAASL,EAAIkB,SAASmB,SAAS,cAAgB,CAAEG,SAAUxC,EAAIkB,SAASmB,WAAY/B,GAAG,CAAC,cAAgBN,EAAIyC,yBAAyB,GAAGvC,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,MAAM,CAACI,GAAG,CAAC,cAAgBN,EAAIyC,yBAAyB,KAAKvC,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,SAAS,CAACE,YAAY,WAAWsC,MAAO,CAAEC,OAAQ3C,EAAI4C,aAAe,cAAgB,WAAavC,MAAM,CAAC,KAAO,SAAS,SAAWL,EAAI4C,cAActC,GAAG,CAAC,MAAQN,EAAI6C,cAAc,CAAC7C,EAAIa,GAAG,aAAaX,EAAG,SAAS,CAACE,YAAY,UAAUsC,MAAO,CAAEC,OAAQ3C,EAAI4C,aAAe,cAAgB,WAAavC,MAAM,CAAC,KAAO,SAAS,SAAWL,EAAI4C,eAAe,CAAC5C,EAAIa,GAAG,IAAIb,EAAI+B,GAAG/B,EAAI4C,aAAe,aAAe,QAAQ,cACn1K,EACIE,EAAkB,G,iDC0KtB,GACA/B,KAAA,eACAgC,WAAA,CACAC,cAAA,KAAAC,IAAAA,EAAAA,IAEAC,OACA,OACAC,KAAA,MACAP,cAAA,EACAnB,cAAA,EACA2B,aAAA,EACApB,SAAA,KACAC,gBAAA,KACAE,SAAA,KACAC,SAAA,KACAlB,SAAA,CACAmC,KAAA,GACAlC,MAAA,GACAQ,QAAA,GACA2B,MAAA,GACAC,MAAA,GACAlB,SAAA,CACAC,IAAA,KACAC,IAAA,OAIA,EACAiB,UACA,sBAAAC,OAAA1C,KAAA,CACA,KAAAoC,KAAA,OACA,MAAAO,EAAA,KAAAD,OAAAE,OAAAD,GACA,KAAAE,OAAAC,SAAA,sBAAAH,EACA,CACA,EACAI,iBAAAC,EAAAC,EAAAC,GAEA,aAAAF,EAAAhD,MAAA,cAAAgD,EAAAhD,MACA,KAAAmD,oBAAA,IAEAD,GACA,EACAE,SAAA,KACAC,EAAAA,EAAAA,IAAA,qBACAC,EAAAA,EAAAA,IAAA,wCACAC,aACA,OAAAC,OAAAC,OAAA,KAAAC,eAAAC,MACA,GAEAC,MAAA,CACAC,qBACA,cAAAzB,OACA0B,QAAAC,IAAA,4BAAAF,oBACA,KAAA1D,SAAAC,MAAA,KAAAyD,mBAAAzD,MACA,KAAAD,SAAAS,QAAA,KAAAiD,mBAAAjD,QACA,KAAAT,SAAAqC,MAAA,KAAAqB,mBAAArB,MACA,KAAArC,SAAAoC,MAAA,KAAAsB,mBAAAtB,MACA,KAAArB,gBAAA,KAAA2C,mBAAAtB,MACA,KAAAtB,SAAA,sBACA,KAAA4C,mBAAAvC,UAAA,KAAAuC,mBAAAvC,SAAAC,KAAA,KAAAsC,mBAAAvC,SAAAE,KACA,KAAArB,SAAAmB,SAAA,KAAAuC,mBAAAvC,SACA,KAAAF,SAAA,KAAAyC,mBAAAvC,SAAAC,IACA,KAAAF,SAAA,KAAAwC,mBAAAvC,SAAAE,MAEA,KAAArB,SAAAmB,SAAA,CAAAC,IAAA,KAAAC,IAAA,MACA,KAAAJ,SAAA,KACA,KAAAC,SAAA,MAIA,EACA2C,cAEA,KAAAC,QAAAC,KAAA,CAAAlE,KAAA,SACA,EACAoB,SAAA+C,GACA,IAAAC,EAAAC,OAAAF,GACA,KAAAhE,SAAAmB,SAAAC,IAAA6C,CACA,EACA/C,SAAA8C,GACA,IAAAG,EAAAD,OAAAF,GACA,KAAAhE,SAAAmB,SAAAE,IAAA8C,CACA,EACA,qBACAC,MAAA,EACAC,QAAAC,GACA,KAAArD,SAAAqD,EAAAlD,IACA,KAAAF,SAAAoD,EAAAjD,GACA,IAGAkD,QAAA,KACAC,EAAAA,EAAAA,IAAA,oDACA5D,mBACA,KAAA6D,MAAAC,UAAAC,OACA,EACAhE,eAAAiE,GAEA,MAAAC,EAAAD,EAAAxE,OAAA0E,MAAA,GACAD,IACA,KAAA3C,aAAA,EACA,KAAApB,SAAA+D,EAAAhF,KAEA,KAAAkB,gBAAAgE,IAAAC,gBAAAH,GACAlB,QAAAC,IAAAiB,GACAlB,QAAAC,IAAA,KAAA7C,iBAEA,EACAQ,qBAAA0D,GACA,KAAAjF,SAAAmB,SAAA8D,CACA,EACAtD,cACA,KAAA8C,MAAAC,UAAA3E,MAAA,GACA,KAAA2B,cAAA,EACA,KAAAnB,cAAA,EACA,KAAAO,SAAA,KACA,KAAAC,gBAAA,KACA,KAAAf,SAAAmC,KAAA,GACA,KAAAnC,SAAAC,MAAA,GACA,KAAAD,SAAAS,QAAA,GACA,KAAAT,SAAAqC,MAAA,GACA,KAAArC,SAAAmB,SAAA,EACA,EACA,qBAEA,QAAAnB,SAAAC,MAAAO,QAAA,KAAAR,SAAAS,QAAAD,QAAA,KAAAM,SAAA,CAUA,GAJA,KAAAY,cAAA,EACA,KAAAnB,cAAA,EAGA,KAAA2B,YAAA,CACA,MAAA2C,EAAA,KAAAJ,MAAAC,UAAAI,MAAA,GACA,GAAAD,EAAA,CACA,MAAAK,GAAAxE,EAAAA,EAAAA,IAAAyE,EAAAA,EAAA,cAAAN,EAAAhF,MACAuF,GAAAC,EAAAA,EAAAA,IAAAH,EAAAL,GAGAS,EAAA,IAAAC,SAAA,CAAAC,EAAAC,KACAL,EAAAhG,GAAA,sBACAsG,IAEA/B,QAAAC,IAAA,gCAAA8B,GACAD,EAAAC,EAAA,IAEA,MAEAC,EAAAA,EAAAA,IAAAP,EAAAQ,SAAAlF,KAAAmF,MAAAC,IACA,KAAA9F,SAAAoC,MAAA0D,EACAnC,QAAAC,IAAA,oBAAAkC,GACAN,GAAA,GACA,GAEA,UAGAF,CACA,CACA,CAGA,KAAAtF,SAAAmC,MAAA,IAAA4D,MAAAC,UACA,cAAA/D,MACA0B,QAAAC,IAAA,8BAAA5D,UACA,KAAAiG,aAAA,CAAAzD,GAAA,KAAAD,OAAAE,OAAAD,GAAA0D,QAAA,KAAAlG,aAEA2D,QAAAC,IAAA,2BAAA5D,UACA,KAAAmG,UAAA,KAAAnG,UA3CA,MAFA,KAAAO,cAAA,CA+CA,ICzV4P,I,UCQxP6F,GAAY,OACd,EACAvH,EACA+C,GACA,EACA,KACA,WACA,MAIF,EAAewE,EAAiB,O","sources":["webpack://vue-gallery/./src/views/AdminAddView.vue","webpack://vue-gallery/src/views/AdminAddView.vue","webpack://vue-gallery/./src/views/AdminAddView.vue?44ce","webpack://vue-gallery/./src/views/AdminAddView.vue?ee5b"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('DefaultLayout',[_c('main',{staticClass:\"formCtn container my-4\"},[_c('form',{attrs:{\"role\":\"form\"},on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('h3',{staticClass:\"container text-center\"},[_vm._v(\"Add New Post\")]),_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-sm-2 col-form-label\",attrs:{\"for\":\"inputTitle\"}},[_vm._v(\"Title\"),_c('span',[_vm._v(\"*\")])]),_c('div',{staticClass:\"field col-sm-10\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.title),expression:\"formData.title\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"inputTitle\",\"name\":\"title\",\"placeholder\":\"Enter post title here\"},domProps:{\"value\":(_vm.formData.title)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formData, \"title\", $event.target.value)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showErrorMsg && !_vm.formData.title.trim()),expression:\"showErrorMsg && !formData.title.trim()\"}],staticClass:\"errorMsg\"},[_vm._v(\"Title is required.\")])])]),_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-sm-2 col-form-label\",attrs:{\"for\":\"contentArea\"}},[_vm._v(\"Content\"),_c('span',[_vm._v(\"*\")])]),_c('div',{staticClass:\"field col-sm-10\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.content),expression:\"formData.content\"}],staticClass:\"form-control\",attrs:{\"id\":\"contentArea\",\"name\":\"content\",\"rows\":\"10\",\"placeholder\":\"Enter what you want to share here\"},domProps:{\"value\":(_vm.formData.content)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formData, \"content\", $event.target.value)}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showErrorMsg && !_vm.formData.content.trim()),expression:\"showErrorMsg && !formData.content.trim()\"}],staticClass:\"errorMsg\"},[_vm._v(\"Content is required.\")])])]),_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-sm-2 col-form-label\",attrs:{\"for\":\"inputCover\"}},[_vm._v(\"Cover Image\"),_c('span',[_vm._v(\"*\")])]),_c('div',{staticClass:\"field col-sm-4\"},[_c('input',{ref:\"fileInput\",staticClass:\"d-none\",attrs:{\"type\":\"file\",\"accept\":\"image/*\",\"id\":\"inputCover\",\"name\":\"cover\"},on:{\"change\":_vm.updateFileName}}),_c('button',{staticClass:\"chooseBtn form-control\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.triggerFileInput}},[_vm._v(_vm._s(_vm.fileName ? \"Reselect file\" : \"Choose file\"))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showErrorMsg && !_vm.fileName),expression:\"showErrorMsg && !fileName\"}],staticClass:\"errorMsg\"},[_vm._v(\"Cover image is required.\")])]),_c('div',{staticClass:\"col-sm-6\"},[_c('input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"readonly\":\"\",\"id\":\"fileNameInput\",\"placeholder\":\"No file chosen\"},domProps:{\"value\":_vm.fileName}})]),(_vm.coverPreviewURL)?_c('div',{staticClass:\"coverCtn\"},[_c('div',{staticClass:\"col-sm-10 offset-sm-2\"},[_c('img',{staticClass:\"coverPreview\",attrs:{\"src\":_vm.coverPreviewURL,\"alt\":\"cover-preview\"}})])]):_vm._e()]),_c('div',{staticClass:\"row\"},[_c('label',{staticClass:\"col-sm-2 col-form-label\",attrs:{\"for\":\"latitudeInput\"}},[_vm._v(\"Location (optional)\")]),_c('div',{staticClass:\"field col-sm-5\"},[_c('div',{staticClass:\"input-group\"},[_c('span',{staticClass:\"input-group-text\",attrs:{\"id\":\"latitudeLabel\"}},[_vm._v(\"Latitude\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.latInput),expression:\"latInput\"}],staticClass:\"form-control\",attrs:{\"id\":\"latitudeInput\",\"type\":\"text\",\"placeholder\":\"Enter latitude here\",\"aria-label\":\"latitudeTitle\",\"aria-describedby\":\"latitudeLabel\"},domProps:{\"value\":(_vm.latInput)},on:{\"input\":function($event){if($event.target.composing)return;_vm.latInput=$event.target.value}}})])]),_c('div',{staticClass:\"field col-sm-5\"},[_c('div',{staticClass:\"input-group\"},[_c('span',{staticClass:\"input-group-text\",attrs:{\"id\":\"longitudeLabel\"}},[_vm._v(\"Longitude\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lngInput),expression:\"lngInput\"}],staticClass:\"form-control\",attrs:{\"id\":\"longitudeInput\",\"type\":\"text\",\"placeholder\":\"Enter longitude here\",\"aria-label\":\"longitudeTitle\",\"aria-describedby\":\"longitudeLabel\"},domProps:{\"value\":(_vm.lngInput)},on:{\"input\":function($event){if($event.target.composing)return;_vm.lngInput=$event.target.value}}})])]),_c('div',{staticClass:\"col-sm-10 offset-2 mapNote\"},[_vm._v(\" *Please input coordinates or move the red marker to your photo location. \")]),(_vm.formData.geopoint.lat && _vm.formData.geopoint.lng)?_c('div',{staticClass:\"col-sm-10 offset-2 mt-4\"},[_c('Map',{attrs:{\"center\":_vm.formData.geopoint,\"initialMarker\":{ position: _vm.formData.geopoint }},on:{\"markerDragged\":_vm.GeopointAfterDragged}})],1):_c('div',{staticClass:\"col-sm-10 offset-2 mt-4\"},[_c('Map',{on:{\"markerDragged\":_vm.GeopointAfterDragged}})],1)]),_c('div',{staticClass:\"container text-center\"},[_c('button',{staticClass:\"resetBtn\",style:({ cursor: _vm.isProcessing ? 'not-allowed' : 'pointer' }),attrs:{\"type\":\"button\",\"disabled\":_vm.isProcessing},on:{\"click\":_vm.handleReset}},[_vm._v(\" Reset \")]),_c('button',{staticClass:\"postBtn\",style:({ cursor: _vm.isProcessing ? 'not-allowed' : 'pointer' }),attrs:{\"type\":\"submit\",\"disabled\":_vm.isProcessing}},[_vm._v(\" \"+_vm._s(_vm.isProcessing ? \"Processing\" : \"Post\")+\" \")])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <DefaultLayout>\n    <main class=\"formCtn container my-4\">\n      <form @submit.prevent.stop=\"handleSubmit\"\n            role=\"form\">\n\n        <h3 class=\"container text-center\">Add New Post</h3>\n        <!-- Title field -->\n        <div class=\"row\">\n          <label for=\"inputTitle\"\n                 class=\"col-sm-2 col-form-label\">Title<span>*</span></label>\n          <div class=\"field col-sm-10\">\n            <input v-model=\"formData.title\"\n                   type=\"text\"\n                   class=\"form-control\"\n                   id=\"inputTitle\"\n                   name=\"title\"\n                   placeholder=\"Enter post title here\">\n            <div v-show=\"showErrorMsg && !formData.title.trim()\"\n                 class=\"errorMsg\">Title is required.</div>\n          </div>\n        </div>\n\n        <!-- Content field -->\n        <div class=\"row\">\n          <label for=\"contentArea\"\n                 class=\"col-sm-2 col-form-label\">Content<span>*</span></label>\n          <div class=\"field col-sm-10\">\n            <textarea v-model=\"formData.content\"\n                      class=\"form-control\"\n                      id=\"contentArea\"\n                      name=\"content\"\n                      rows=\"10\"\n                      placeholder=\"Enter what you want to share here\"></textarea>\n            <div v-show=\"showErrorMsg && !formData.content.trim()\"\n                 class=\"errorMsg\">Content is required.</div>\n          </div>\n\n        </div>\n\n        <!-- Post Cover Image field -->\n        <div class=\"row\">\n          <label for=\"inputCover\"\n                 class=\"col-sm-2 col-form-label\">Cover Image<span>*</span></label>\n          <div class=\"field col-sm-4 \">\n            <!-- Hide fileInput to replace default displaying with custom text -->\n            <input class=\"d-none\"\n                   type=\"file\"\n                   accept=\"image/*\"\n                   id=\"inputCover\"\n                   name=\"cover\"\n                   ref=\"fileInput\"\n                   @change=\"updateFileName\">\n            <!-- button for choosing file -->\n            <button class=\"chooseBtn form-control\"\n                    type=\"button\"\n                    @click=\"triggerFileInput\">{{ fileName ? \"Reselect file\" : \"Choose file\" }}</button>\n            <div v-show=\"showErrorMsg && !fileName\"\n                 class=\"errorMsg\">Cover image is required.</div>\n          </div>\n          <div class=\"col-sm-6\">\n            <input type=\"text\"\n                   readonly\n                   class=\"form-control\"\n                   :value=\"fileName\"\n                   id=\"fileNameInput\"\n                   placeholder=\"No file chosen\">\n          </div>\n          <!-- image preview -->\n          <div v-if=\"coverPreviewURL\"\n               class=\"coverCtn\">\n            <div class=\"col-sm-10 offset-sm-2\">\n              <img :src=\"coverPreviewURL\"\n                   alt=\"cover-preview\"\n                   class=\"coverPreview\">\n            </div>\n          </div>\n        </div>\n\n        <!-- Album field -->\n        <!-- <div class=\"row\">\n          <label for=\"selectAlbum\"\n                 class=\"col-sm-2 col-form-label\">Album (Optional)</label>\n          <div class=\"col-sm-10\">\n            <select v-model=\"formData.album\"\n                    class=\"form-control\"\n                    id=\"selectAlbum\"\n                    name=\"albums\">\n              <option value=\"\"\n                      class=\"text-center\"\n                      selected>- Choose album if you want it to show on the post -</option>\n              <option v-for=\"(albumName, index) in albumNames\"\n                      :key=\"index\"\n                      :value=\"albumName\">{{ albumName }}</option>\n            </select>\n          </div>\n        </div> -->\n\n        <!-- Map field -->\n        <div class=\"row\">\n          <label for=\"latitudeInput\"\n                 class=\"col-sm-2 col-form-label\">Location (optional)</label>\n          <div class=\"field col-sm-5\">\n            <div class=\"input-group\">\n              <span class=\"input-group-text\"\n                    id=\"latitudeLabel\">Latitude</span>\n              <input v-model=\"latInput\"\n                     id=\"latitudeInput\"\n                     type=\"text\"\n                     class=\"form-control\"\n                     placeholder=\"Enter latitude here\"\n                     aria-label=\"latitudeTitle\"\n                     aria-describedby=\"latitudeLabel\">\n            </div>\n          </div>\n          <div class=\"field col-sm-5\">\n            <div class=\"input-group\">\n              <span class=\"input-group-text\"\n                    id=\"longitudeLabel\">Longitude</span>\n              <input v-model=\"lngInput\"\n                     id=\"longitudeInput\"\n                     type=\"text\"\n                     class=\"form-control\"\n                     placeholder=\"Enter longitude here\"\n                     aria-label=\"longitudeTitle\"\n                     aria-describedby=\"longitudeLabel\">\n            </div>\n          </div>\n          <div class=\"col-sm-10 offset-2 mapNote\">\n            *Please input coordinates or move the red marker to your photo location.\n          </div>\n          <div v-if=\"formData.geopoint.lat && formData.geopoint.lng\"\n               class=\"col-sm-10 offset-2 mt-4\">\n            <Map @markerDragged=\"GeopointAfterDragged\"\n                 :center=\"formData.geopoint\"\n                 :initialMarker=\"{ position: formData.geopoint }\"></Map>\n          </div>\n          <div v-else\n               class=\"col-sm-10 offset-2 mt-4\">\n            <Map @markerDragged=\"GeopointAfterDragged\"></Map>\n          </div>\n        </div>\n\n\n        <!-- Post button -->\n        <div class=\"container text-center\">\n          <button @click=\"handleReset\"\n                  class=\"resetBtn\"\n                  type=\"button\"\n                  :disabled=\"isProcessing\"\n                  :style=\"{ cursor: isProcessing ? 'not-allowed' : 'pointer' }\">\n            Reset\n          </button>\n          <button class=\"postBtn\"\n                  type=\"submit\"\n                  :disabled=\"isProcessing\"\n                  :style=\"{ cursor: isProcessing ? 'not-allowed' : 'pointer' }\">\n            {{ isProcessing ? \"Processing\" : \"Post\" }}\n          </button>\n        </div>\n      </form>\n    </main>\n  </DefaultLayout>\n</template>\n\n\n<script>\nimport { DefaultLayout, Map } from \"@/components\";\nimport { mapGetters, mapActions, mapState } from \"vuex\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { storage } from \"@/store/firebase.js\";\n\nexport default {\n  name: \"AdminAddView\",\n  components: {\n    DefaultLayout, Map\n  },\n  data() {\n    return {\n      mode: \"add\",\n      isProcessing: false,\n      showErrorMsg: false,\n      fileChanged: false, // for edit mode\n      fileName: null, // for file name showing\n      coverPreviewURL: null, // for preview showing\n      latInput: null,\n      lngInput: null,\n      formData: {\n        date: \"\",\n        title: \"\",\n        content: \"\",\n        cover: \"\",\n        album: \"\",\n        geopoint: {\n          lat: null,\n          lng: null,\n        },\n      },\n    }\n  },\n  mounted() {\n    if (this.$route.name === \"adminEdit\") {\n      this.mode = \"edit\";\n      const id = this.$route.params.id;\n      this.$store.dispatch(\"toChangeFocusPostID\", id);\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    // Reset focusPostID if leaving to other pages from edit page\n    if (to.name !== \"adminAdd\" && to.name !== \"adminEdit\") {\n      this.toChangeFocusPostID(\"\");\n    }\n    next();\n  },\n  computed: {\n    ...mapState([\"postChanged\"]),\n    ...mapGetters([\"albumsInOrder\", \"postFilterByPostID\"]),\n    albumNames() {\n      return Object.values(this.albumsInOrder).flat();\n    },\n  },\n  watch: {\n    postFilterByPostID() {\n      if (this.mode === \"edit\") {\n        console.log(\"postFilterByPostID: \", this.postFilterByPostID);\n        this.formData.title = this.postFilterByPostID.title;\n        this.formData.content = this.postFilterByPostID.content;\n        this.formData.album = this.postFilterByPostID.album;\n        this.formData.cover = this.postFilterByPostID.cover;\n        this.coverPreviewURL = this.postFilterByPostID.cover;\n        this.fileName = \"original post cover\";\n        if (this.postFilterByPostID.geopoint && this.postFilterByPostID.geopoint.lat && this.postFilterByPostID.geopoint.lng) {\n          this.formData.geopoint = this.postFilterByPostID.geopoint;\n          this.latInput = this.postFilterByPostID.geopoint.lat;\n          this.lngInput = this.postFilterByPostID.geopoint.lng;\n        } else {\n          this.formData.geopoint = { lat: null, lng: null };\n          this.latInput = null;\n          this.lngInput = null;\n        }\n\n      }\n    },\n    postChanged() {\n      // redirect to admin page after clicking submit button\n      this.$router.push({ name: \"admin\" });\n    },\n    latInput(newString) {\n      let latInputNumber = Number(newString);\n      this.formData.geopoint.lat = latInputNumber;\n    },\n    lngInput(newString) {\n      let lngInputNumber = Number(newString);\n      this.formData.geopoint.lng = lngInputNumber;\n    },\n    'formData.geopoint': {\n      deep: true,\n      handler(newVal) {\n        this.latInput = newVal.lat;\n        this.lngInput = newVal.lng;\n      }\n    },\n  },\n  methods: {\n    ...mapActions([\"toChangeFocusPostID\", \"toAddPost\", \"toUpdatePost\"]),\n    triggerFileInput() {\n      this.$refs.fileInput.click();\n    },\n    updateFileName(event) {\n      // Access to the image file object\n      const file = event.target.files[0];\n      if (file) {\n        this.fileChanged = true;\n        this.fileName = file.name; // Change fileName to show\n        // Create a blob URL representing the file\n        this.coverPreviewURL = URL.createObjectURL(file);\n        console.log(file);\n        console.log(this.coverPreviewURL);\n      }\n    },\n    GeopointAfterDragged(newPosition) {\n      this.formData.geopoint = newPosition;\n    },\n    handleReset() {\n      this.$refs.fileInput.value = \"\"; // Clear the value of fileInput\n      this.isProcessing = false;\n      this.showErrorMsg = false;\n      this.fileName = null;\n      this.coverPreviewURL = null;\n      this.formData.date = \"\";\n      this.formData.title = \"\";\n      this.formData.content = \"\";\n      this.formData.album = \"\";\n      this.formData.geopoint = \"\";\n    },\n    async handleSubmit() {\n      // Step 1: Validate form: Ensure all required fields and cover photo are provided.\n      if (!this.formData.title.trim() || !this.formData.content.trim() || !this.fileName) {\n        this.showErrorMsg = true;\n        return;\n      }\n\n      // Step 2: Update states of post button and error message \n      this.isProcessing = true;\n      this.showErrorMsg = false;\n\n      // Step 3: Check if cover URL needs to update or not\n      if (this.fileChanged) {\n        const file = this.$refs.fileInput.files[0];\n        if (file) {\n          const storageRef = ref(storage, 'post-cover/' + file.name);\n          const uploadTask = uploadBytesResumable(storageRef, file);\n\n          // Create a promise to handle the upload process\n          const uploadPromise = new Promise((resolve, reject) => {\n            uploadTask.on('state_changed', null,\n              (error) => {\n                // Handle uploading error\n                console.log(\"Error uploading cover image: \", error);\n                reject(error);\n              },\n              () => {\n                // Upload completed, get the download URL\n                getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\n                  this.formData.cover = downloadURL; // Update cover URL\n                  console.log('File available at', downloadURL);\n                  resolve();\n                });\n              }\n            );\n          });\n          // Wait for the upload and URL fetching to finish\n          await uploadPromise;\n        }\n      }\n\n      // Step 4: Send back to database\n      this.formData.date = new Date().getTime(); // Update post date\n      if (this.mode === \"edit\") {\n        console.log(\"toUpdatePost payload: \", this.formData);\n        this.toUpdatePost({ id: this.$route.params.id, newPost: this.formData });\n      } else {\n        console.log(\"toAddPost payload: \", this.formData);\n        this.toAddPost(this.formData);\n      }\n    },\n  }\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/color.scss\";\n\n.formCtn {\n  max-width: 900px;\n  min-height: 65vh;\n\n  h3 {\n    color: $green-4;\n    border-bottom: 6px groove $green-2;\n    line-height: 3rem;\n    margin-bottom: 2rem;\n  }\n}\n\n.col-form-label {\n  font-weight: 600;\n  text-align: start;\n  color: $green-6;\n\n  &>span {\n    color: rgb(218, 90, 165);\n    font-size: 1.1rem;\n  }\n}\n\n.form-control:focus {\n  box-shadow: 0 0 10px $green-4;\n}\n\n.postBtn,\n.resetBtn {\n  width: 110px;\n  height: 2rem;\n  font-size: 1.1rem;\n  font-weight: 600;\n  margin: 1rem;\n  color: white;\n  border: none;\n  border-radius: 10px;\n}\n\n.postBtn {\n  background-color: $green-3;\n\n  &:hover {\n    background-color: $green-6;\n  }\n\n  &:active {\n    box-shadow: 0 0 20px $green-4;\n  }\n}\n\n.resetBtn {\n  background-color: $pink-0;\n\n  &:hover {\n    background-color: $pink-2;\n  }\n\n  &:active {\n    box-shadow: 0 0 20px $pink-1;\n  }\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  color: $shadow-grey;\n}\n\n.row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 2.2rem;\n}\n\n.coverCtn {\n  margin-top: .8rem;\n\n  .coverPreview {\n    width: 50%;\n  }\n}\n\n\n\n.field {\n  position: relative;\n\n  .errorMsg {\n    position: absolute;\n    left: 12px;\n    bottom: -20px;\n    color: $pink-2;\n    font-size: 0.9rem;\n    font-weight: bold;\n  }\n}\n\n.mapNote {\n  font-style: italic;\n  font-weight: bold;\n  color: $green-5;\n}\n\n@media screen and (min-width: 576px) {\n  .col-form-label {\n    text-align: end;\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminAddView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminAddView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminAddView.vue?vue&type=template&id=402a4cec&scoped=true&\"\nimport script from \"./AdminAddView.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminAddView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminAddView.vue?vue&type=style&index=0&id=402a4cec&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"402a4cec\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","preventDefault","stopPropagation","handleSubmit","apply","arguments","_v","directives","name","rawName","value","formData","title","expression","domProps","target","composing","$set","showErrorMsg","trim","content","ref","updateFileName","triggerFileInput","_s","fileName","coverPreviewURL","_e","latInput","lngInput","geopoint","lat","lng","position","GeopointAfterDragged","style","cursor","isProcessing","handleReset","staticRenderFns","components","DefaultLayout","Map","data","mode","fileChanged","date","cover","album","mounted","$route","id","params","$store","dispatch","beforeRouteLeave","to","from","next","toChangeFocusPostID","computed","mapState","mapGetters","albumNames","Object","values","albumsInOrder","flat","watch","postFilterByPostID","console","log","postChanged","$router","push","newString","latInputNumber","Number","lngInputNumber","deep","handler","newVal","methods","mapActions","$refs","fileInput","click","event","file","files","URL","createObjectURL","newPosition","storageRef","storage","uploadTask","uploadBytesResumable","uploadPromise","Promise","resolve","reject","error","getDownloadURL","snapshot","then","downloadURL","Date","getTime","toUpdatePost","newPost","toAddPost","component"],"sourceRoot":""}